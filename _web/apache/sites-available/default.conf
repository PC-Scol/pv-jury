# -*- coding: utf-8 mode: conf -*- vim:syntax=apache:sw=4:sts=4:et:ai:si:sta:fenc=utf-8
<VirtualHost *:80>
    #if SERVER_NAME#ServerName @@SERVER_NAME@@

    Alias / /var/www/app/public/

    RewriteEngine On
    RewriteCond %{HTTP_COOKIE} auth:app:pv-jury=cas%3A.*
    RewriteCond %{HTTP_COOKIE} MOD_AUTH_CAS=.*
    RewriteCond %{HTTP_COOKIE} PHPSESSID=.*
    RewriteRule ^/adminer/(.*) http://adminer/adminer/$1 [P,L]
    ProxyPassReverse /adminer/ http://adminer/adminer/

    #if BASE_URL_CAS#CASRootProxiedAs @@BASE_URL_CAS@@
    <Location /_casauth.php>
        AuthType CAS
        CASAuthNHeader On
        Require valid-user
    </Location>

    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/html

    #LogLevel info ssl:warn

    ErrorLog /proc/self/fd/2
    CustomLog /proc/self/fd/1 combined

    #Include conf-available/serve-cgi-bin.conf
</VirtualHost>
